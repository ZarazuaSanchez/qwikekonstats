{"ast":null,"code":"var _jsxFileName = \"/home/eddy/web/qwikekonstats/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Form from \"./components/Form\";\nimport StatsTable from \"./components/StatsTable\";\nimport Title from \"./components/Title\";\nconst TOKEN = \"7811b62367f018\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      countrycode: undefined,\n      countryname: undefined,\n      indicatorcode: undefined,\n      indicatorname: undefined,\n      startYear: undefined,\n      endYear: undefined,\n      stats: undefined,\n      error: undefined\n    };\n\n    this.getStats = async e => {\n      var country = \"AR\";\n      var indicator = undefined;\n      var y1 = undefined;\n      var y2 = undefined;\n\n      if (e) {\n        e.preventDefault();\n        country = e.target.elements.country.value;\n        indicator = e.target.elements.indicator.value;\n        y1 = e.target.elements.startYear.value;\n        y2 = e.target.elements.endYear.value;\n      } else {\n        var $ = require('jquery');\n\n        await $.getJSON(\"https://ipinfo.io?token=\".concat(TOKEN), function (response) {\n          console.log(\"In success function\");\n          country = response.country;\n          indicator = 'SP.POP.TOTL';\n          y1 = 2008;\n          y2 = 2018;\n        });\n      }\n\n      console.log(\"Line 54\");\n      console.log(\"country = \".concat(country));\n      console.log(\"indicator = \".concat(indicator));\n      console.log(\"y1 = \".concat(y1));\n      console.log(\"y2 = \".concat(y2));\n      let res = undefined;\n\n      if (y2) {\n        res = await fetch(\"http://api.worldbank.org/v2/country/\".concat(country, \"/indicator/\").concat(indicator, \"?date=\").concat(y1, \":\").concat(y2, \"&format=json\"));\n      } else {\n        res = await fetch(\"http://api.worldbank.org/v2/country/\".concat(country, \"/indicator/\").concat(indicator, \"?date=\").concat(y1, \"&format=json\"));\n      }\n\n      const cjson = await res.json();\n      const rawdata = cjson[1];\n      console.log(\"rawdata = \".concat(rawdata));\n      console.log(rawdata);\n\n      if (rawdata) {\n        var stats = {};\n\n        for (var elem of rawdata) {\n          stats[elem.date] = elem.value;\n        }\n      } else {\n        this.setState({\n          error: \"No Data Available for \".concat(country, \"!\")\n        });\n      }\n\n      if (country && indicator && stats) {\n        const indicatorname = rawdata[0].indicator.value;\n        const countryname = rawdata[0].country.value;\n        this.setState({\n          country: countryname,\n          indicator: indicatorname,\n          stats: stats,\n          error: \"\"\n        });\n      }\n\n      return;\n    };\n\n    this.getStats();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-xs-5 title-form-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"title-form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Form, {\n      getStats: this.getStats,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-xs-7 table-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.state.error && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \" \", this.state.error, \" \"), this.state.stats && React.createElement(StatsTable, {\n      country: this.state.country,\n      indicator: this.state.indicator,\n      stats: this.state.stats,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/eddy/web/qwikekonstats/src/App.js"],"names":["React","Component","Form","StatsTable","Title","TOKEN","App","constructor","props","state","countrycode","undefined","countryname","indicatorcode","indicatorname","startYear","endYear","stats","error","getStats","e","country","indicator","y1","y2","preventDefault","target","elements","value","$","require","getJSON","response","console","log","res","fetch","cjson","json","rawdata","elem","date","setState","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Form from \"./components/Form\";\nimport StatsTable from \"./components/StatsTable\";\nimport Title from \"./components/Title\";\n\nconst TOKEN = \"7811b62367f018\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.getStats();\n  }\n\n  state = {\n    countrycode: undefined,\n    countryname: undefined,\n    indicatorcode: undefined,\n    indicatorname: undefined,\n    startYear: undefined,\n    endYear: undefined,\n    stats: undefined,\n    error: undefined\n  };\n\n  getStats = async (e) => {\n\n    var country = \"AR\";\n    var indicator = undefined;\n    var y1 = undefined;\n    var y2 = undefined;\n\n    if (e) {\n      e.preventDefault();\n      country = e.target.elements.country.value;\n      indicator = e.target.elements.indicator.value;\n      y1 = e.target.elements.startYear.value;\n      y2 = e.target.elements.endYear.value;\n    } else {\n\n      var $ = require('jquery');\n      await $.getJSON(`https://ipinfo.io?token=${TOKEN}`, function(response) {\n        console.log(\"In success function\");\n        country = response.country;\n        indicator = 'SP.POP.TOTL';\n        y1 = 2008;\n        y2 = 2018;\n\n      });\n    }\n    console.log(\"Line 54\")\n    console.log(`country = ${country}`);\n    console.log(`indicator = ${indicator}`);\n    console.log(`y1 = ${y1}`);\n    console.log(`y2 = ${y2}`);\n\n    let res = undefined;\n\n    if (y2) {\n      res = await fetch(`http://api.worldbank.org/v2/country/${country}/indicator/${indicator}?date=${y1}:${y2}&format=json`);\n    } else {\n      res =  await fetch(`http://api.worldbank.org/v2/country/${country}/indicator/${indicator}?date=${y1}&format=json`);\n    }\n\n    const cjson = await res.json();\n    const rawdata = cjson[1];\n    console.log(`rawdata = ${rawdata}`);\n    console.log(rawdata)\n\n    if(rawdata){\n      var stats = {};\n\n      for( var elem of rawdata ){\n        stats[elem.date] = elem.value;\n      }\n    } else {\n      this.setState({\n        error: `No Data Available for ${country}!`,\n      })\n    }\n\n\n\n    if( country && indicator && stats ){\n      const indicatorname = rawdata[0].indicator.value;\n      const countryname = rawdata[0].country.value;\n      this.setState({\n        country: countryname,\n        indicator: indicatorname,\n        stats: stats,\n        error: \"\"\n      });\n    }\n    return;\n\n  }\n  render() {\n    return (\n      <div className=\"wrapper\">\n        <div className=\"main\">\n          <div className=\"container\">\n            <div className=\"row\">\n              <div className=\"col-xs-5 title-form-container\">\n                <div className=\"title-form-group\">\n                  <Title />\n                  <Form getStats={this.getStats} />\n                </div>\n              </div>\n              <div className=\"col-xs-7 table-container\">\n                { this.state.error && <div> {this.state.error} </div>}\n                { this.state.stats && <StatsTable country={this.state.country} indicator={this.state.indicator} stats={this.state.stats} /> }\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}